(window.webpackJsonp=window.webpackJsonp||[]).push([[97],{2387:function(t,e,r){"use strict";r.r(e);var a=r(2),n=Object(a.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h2",{attrs:{id:"exporter"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#exporter"}},[t._v("#")]),t._v(" Exporter")]),t._v(" "),e("h3",{attrs:{id:"oracle-exporter-issues"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#oracle-exporter-issues"}},[t._v("#")]),t._v(" Oracle Exporter issues")]),t._v(" "),e("p",[e("strong",[t._v("Golang-pkg-config --cflags oci8, Package oci8 was not found in the pkg-config search path.")])]),t._v(" "),e("p",[t._v("在linux下可以正常运行"),e("a",{attrs:{href:"https://github.com/iamseth/oracledb_exporter",target:"_blank",rel:"noopener noreferrer"}},[t._v("oracledb_exporter"),e("OutboundLink")],1),t._v("，在windows64下启动时报错")]),t._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("pkg-config --cflags oci8\nPackage oci8 was not found in the pkg-config search path.\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br")])]),e("p",[t._v("因为linux中已经安装了oracle客户端，所以怀疑可能是windows下没有导致的")]),t._v(" "),e("h4",{attrs:{id:"_1-go-oci8"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-go-oci8"}},[t._v("#")]),t._v(" 1.go-oci8")]),t._v(" "),e("ul",[e("li",[t._v("地址："),e("a",{attrs:{href:"https://github.com/wendal/go-oci8",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/wendal/go-oci8"),e("OutboundLink")],1)]),t._v(" "),e("li",[t._v("它是 "),e("a",{attrs:{href:"https://github.com/mattn/go-oci8",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/mattn/go-oci8"),e("OutboundLink")],1),t._v(" 的分支，增加了windows下中文的安装说明及相关文件。")]),t._v(" "),e("li",[t._v("从oracledb_exporter的代码中可以看到引用的是go-oci8\n"),e("code",[t._v('_ "github.com/mattn/go-oci8"')]),t._v(",所以需要安装windows的oracle连接。")])]),t._v(" "),e("h4",{attrs:{id:"_2-安装oci"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-安装oci"}},[t._v("#")]),t._v(" 2.安装oci")]),t._v(" "),e("ul",[e("li",[t._v("地址："),e("a",{attrs:{href:"https://www.oracle.com/technetwork/database/database-technologies/instant-client/downloads/index.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.oracle.com/technetwork/database/database-technologies/instant-client/downloads/index.html"),e("OutboundLink")],1)]),t._v(" "),e("li",[t._v("我的安装目录为：F:\\instantclient_18 _3")])]),t._v(" "),e("h4",{attrs:{id:"_3-安装oci-sdk"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-安装oci-sdk"}},[t._v("#")]),t._v(" 3.安装oci-sdk")]),t._v(" "),e("ul",[e("li",[t._v("地址：同上。")]),t._v(" "),e("li",[t._v("我的安装目录为F:\\instantclient_18 _3\\sdk")])]),t._v(" "),e("h4",{attrs:{id:"_4-安装mingw"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-安装mingw"}},[t._v("#")]),t._v(" 4.安装MinGW")]),t._v(" "),e("ul",[e("li",[t._v("地址："),e("a",{attrs:{href:"https://sourceforge.net/projects/mingw-w64/files/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://sourceforge.net/projects/mingw-w64/files/"),e("OutboundLink")],1)]),t._v(" "),e("li",[t._v("我的安装目录为F:\\mingw-w64")]),t._v(" "),e("li",[t._v("配置环境变量：在系统变量path中追加 F:\\mingw-w64\\x86_64-8.1.0-posix-seh-rt_v6-rev0\\mingw64\\bin")])]),t._v(" "),e("h4",{attrs:{id:"_5-下载go-oci8驱动"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-下载go-oci8驱动"}},[t._v("#")]),t._v(" 5.下载go-oci8驱动")]),t._v(" "),e("ul",[e("li",[t._v("地址："),e("a",{attrs:{href:"https://github.com/wendal/go-oci8",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/wendal/go-oci8"),e("OutboundLink")],1)]),t._v(" "),e("li",[t._v("运行命令 go get github.com/wendal/go-oci8 (报错先不管)")]),t._v(" "),e("li",[t._v("复制GOPATH目下的\\src\\github.com\\wendal\\go-oci8\\windows\\pkg-config.exe到到mingw的安装目录mingw64\\bin下。")]),t._v(" "),e("li",[t._v("复制GOPATH目下的\\src\\github.com\\wendal\\go-oci8\\windows\\oci8.pc到到mingw的安装目录mingw64\\lib\\pkg-config的下。")]),t._v(" "),e("li",[t._v("修改oci8.pc")])]),t._v(" "),e("blockquote",[e("p",[t._v("#Package Information for pkg-config\nprefix=F:/instantclient_18_3\nexec_prefix=F:/instantclient_18_3\nlibdir=${exec_prefix}\nincludedir=${prefix}/sdk/include/")]),t._v(" "),e("p",[t._v("Name: OCI\nDescription: Oracle database engine\nVersion: 18.3\nLibs: -L${libdir} -loci\nLibs.private:\nCflags: -I${includedir}")])]),t._v(" "),e("h4",{attrs:{id:"_6-环境变量配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_6-环境变量配置"}},[t._v("#")]),t._v(" 6.环境变量配置")]),t._v(" "),e("ul",[e("li",[t._v("PATH=原有PATH;F:\\instantclient_18_3;")]),t._v(" "),e("li",[t._v("PKG_CONFIG_PATH=F:\\mingw-w64\\x86_64-8.1.0-posix-seh-rt_v6-rev0\\mingw64\\lib\\pkg-config")])]),t._v(" "),e("h5",{attrs:{id:"启动报错"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#启动报错"}},[t._v("#")]),t._v(" 启动报错")]),t._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("F:\\GOENV\\src\\github.com\\wendal\\go-oci8\\oci8.go:119: cannot use (**_Ctype_struct_OCIServer)(unsafe.Pointer(&conn.svc)) (type **_Ctype_struct_OCIServer) as type **_Ctype_struct_OCISvcCtx in argument to func literal\nF:\\GOENV\\src\\github.com\\wendal\\go-oci8\\oci8.go:136: cannot use (*_Ctype_struct_OCIServer)(c.svc) (type *_Ctype_struct_OCIServer) as type *_Ctype_struct_OCISvcCtx in argument to func literal\nF:\\GOENV\\src\\github.com\\wendal\\go-oci8\\oci8.go:263: cannot use (*_Ctype_struct_OCIServer)(s.c.svc) (type *_Ctype_struct_OCIServer) as type *_Ctype_struct_OCISvcCtx in argument to func literal\nF:\\GOENV\\src\\github.com\\wendal\\go-oci8\\oci8.go:383: cannot use (*_Ctype_struct_OCIServer)(s.c.svc) (type *_Ctype_struct_OCIServer) as type *_Ctype_struct_OCISvcCtx in argument to func literal\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br")])]),e("h5",{attrs:{id:"替换gopath目下的-src-github-com-wendal-go-oci8里四处ociserver为ocisvcctx。"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#替换gopath目下的-src-github-com-wendal-go-oci8里四处ociserver为ocisvcctx。"}},[t._v("#")]),t._v(" 替换GOPATH目下的\\src\\github.com\\wendal\\go-oci8里四处OCIServer为OCISvcCtx。")]),t._v(" "),e("p",[t._v("参考："),e("br"),t._v(" "),e("a",{attrs:{href:"https://www.cnblogs.com/ghj1976/p/3437250.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.cnblogs.com/ghj1976/p/3437250.html"),e("OutboundLink")],1),e("br"),t._v(" "),e("a",{attrs:{href:"https://blog.csdn.net/wq57885/article/details/82841792",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://blog.csdn.net/wq57885/article/details/82841792"),e("OutboundLink")],1)])])}),[],!1,null,null,null);e.default=n.exports}}]);