(window.webpackJsonp=window.webpackJsonp||[]).push([[98],{2383:function(t,e,r){"use strict";r.r(e);var a=r(43),n=Object(a.a)({},(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("h3",{attrs:{id:"golang-pkg-config-cflags-oci8-package-oci8-was-not-found-in-the-pkg-config-search-path"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#golang-pkg-config-cflags-oci8-package-oci8-was-not-found-in-the-pkg-config-search-path"}},[t._v("#")]),t._v(" Golang-pkg-config --cflags oci8, Package oci8 was not found in the pkg-config search path.")]),t._v(" "),r("h6",{attrs:{id:"在linux下可以正常运行oracledb-exporter-在windows64下启动时报错"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#在linux下可以正常运行oracledb-exporter-在windows64下启动时报错"}},[t._v("#")]),t._v(" 在linux下可以正常运行"),r("a",{attrs:{href:"https://github.com/iamseth/oracledb_exporter",target:"_blank",rel:"noopener noreferrer"}},[t._v("oracledb_exporter"),r("OutboundLink")],1),t._v("，在windows64下启动时报错")]),t._v(" "),r("div",{staticClass:"language- line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v("pkg-config --cflags oci8\nPackage oci8 was not found in the pkg-config search path.\n")])]),t._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[t._v("1")]),r("br"),r("span",{staticClass:"line-number"},[t._v("2")]),r("br")])]),r("h6",{attrs:{id:"因为linux中已经安装了oracle客户端-所以怀疑可能是windows下没有导致的。"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#因为linux中已经安装了oracle客户端-所以怀疑可能是windows下没有导致的。"}},[t._v("#")]),t._v(" 因为linux中已经安装了oracle客户端，所以怀疑可能是windows下没有导致的。")]),t._v(" "),r("h4",{attrs:{id:"_1-go-oci8"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_1-go-oci8"}},[t._v("#")]),t._v(" 1.go-oci8")]),t._v(" "),r("ul",[r("li",[t._v("地址："),r("a",{attrs:{href:"https://github.com/wendal/go-oci8",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/wendal/go-oci8"),r("OutboundLink")],1)]),t._v(" "),r("li",[t._v("它是 "),r("a",{attrs:{href:"https://github.com/mattn/go-oci8",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/mattn/go-oci8"),r("OutboundLink")],1),t._v(" 的分支，增加了windows下中文的安装说明及相关文件。")]),t._v(" "),r("li",[t._v("从oracledb_exporter的代码中可以看到引用的是go-oci8\n"),r("code",[t._v('_ "github.com/mattn/go-oci8"')]),t._v(",所以需要安装windows的oracle连接。")])]),t._v(" "),r("h4",{attrs:{id:"_2-安装oci"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_2-安装oci"}},[t._v("#")]),t._v(" 2.安装oci")]),t._v(" "),r("ul",[r("li",[t._v("地址："),r("a",{attrs:{href:"https://www.oracle.com/technetwork/database/database-technologies/instant-client/downloads/index.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.oracle.com/technetwork/database/database-technologies/instant-client/downloads/index.html"),r("OutboundLink")],1)]),t._v(" "),r("li",[t._v("我的安装目录为：F:\\instantclient_18 _3")])]),t._v(" "),r("h4",{attrs:{id:"_3-安装oci-sdk"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_3-安装oci-sdk"}},[t._v("#")]),t._v(" 3.安装oci-sdk")]),t._v(" "),r("ul",[r("li",[t._v("地址：同上。")]),t._v(" "),r("li",[t._v("我的安装目录为F:\\instantclient_18 _3\\sdk")])]),t._v(" "),r("h4",{attrs:{id:"_4-安装mingw"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_4-安装mingw"}},[t._v("#")]),t._v(" 4.安装MinGW")]),t._v(" "),r("ul",[r("li",[t._v("地址："),r("a",{attrs:{href:"https://sourceforge.net/projects/mingw-w64/files/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://sourceforge.net/projects/mingw-w64/files/"),r("OutboundLink")],1)]),t._v(" "),r("li",[t._v("我的安装目录为F:\\mingw-w64")]),t._v(" "),r("li",[t._v("配置环境变量：在系统变量path中追加 F:\\mingw-w64\\x86_64-8.1.0-posix-seh-rt_v6-rev0\\mingw64\\bin")])]),t._v(" "),r("h4",{attrs:{id:"_5-下载go-oci8驱动"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_5-下载go-oci8驱动"}},[t._v("#")]),t._v(" 5.下载go-oci8驱动")]),t._v(" "),r("ul",[r("li",[t._v("地址："),r("a",{attrs:{href:"https://github.com/wendal/go-oci8",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/wendal/go-oci8"),r("OutboundLink")],1)]),t._v(" "),r("li",[t._v("运行命令 go get github.com/wendal/go-oci8 (报错先不管)")]),t._v(" "),r("li",[t._v("复制GOPATH目下的\\src\\github.com\\wendal\\go-oci8\\windows\\pkg-config.exe到到mingw的安装目录mingw64\\bin下。")]),t._v(" "),r("li",[t._v("复制GOPATH目下的\\src\\github.com\\wendal\\go-oci8\\windows\\oci8.pc到到mingw的安装目录mingw64\\lib\\pkg-config的下。")]),t._v(" "),r("li",[t._v("修改oci8.pc")])]),t._v(" "),r("blockquote",[r("p",[t._v("#Package Information for pkg-config\nprefix=F:/instantclient_18_3\nexec_prefix=F:/instantclient_18_3\nlibdir=${exec_prefix}\nincludedir=${prefix}/sdk/include/")]),t._v(" "),r("p",[t._v("Name: OCI\nDescription: Oracle database engine\nVersion: 18.3\nLibs: -L${libdir} -loci\nLibs.private:\nCflags: -I${includedir}")])]),t._v(" "),r("h4",{attrs:{id:"_6-环境变量配置"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_6-环境变量配置"}},[t._v("#")]),t._v(" 6.环境变量配置")]),t._v(" "),r("ul",[r("li",[t._v("PATH=原有PATH;F:\\instantclient_18_3;")]),t._v(" "),r("li",[t._v("PKG_CONFIG_PATH=F:\\mingw-w64\\x86_64-8.1.0-posix-seh-rt_v6-rev0\\mingw64\\lib\\pkg-config")])]),t._v(" "),r("h5",{attrs:{id:"启动报错"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#启动报错"}},[t._v("#")]),t._v(" 启动报错")]),t._v(" "),r("div",{staticClass:"language- line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v("F:\\GOENV\\src\\github.com\\wendal\\go-oci8\\oci8.go:119: cannot use (**_Ctype_struct_OCIServer)(unsafe.Pointer(&conn.svc)) (type **_Ctype_struct_OCIServer) as type **_Ctype_struct_OCISvcCtx in argument to func literal\nF:\\GOENV\\src\\github.com\\wendal\\go-oci8\\oci8.go:136: cannot use (*_Ctype_struct_OCIServer)(c.svc) (type *_Ctype_struct_OCIServer) as type *_Ctype_struct_OCISvcCtx in argument to func literal\nF:\\GOENV\\src\\github.com\\wendal\\go-oci8\\oci8.go:263: cannot use (*_Ctype_struct_OCIServer)(s.c.svc) (type *_Ctype_struct_OCIServer) as type *_Ctype_struct_OCISvcCtx in argument to func literal\nF:\\GOENV\\src\\github.com\\wendal\\go-oci8\\oci8.go:383: cannot use (*_Ctype_struct_OCIServer)(s.c.svc) (type *_Ctype_struct_OCIServer) as type *_Ctype_struct_OCISvcCtx in argument to func literal\n")])]),t._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[t._v("1")]),r("br"),r("span",{staticClass:"line-number"},[t._v("2")]),r("br"),r("span",{staticClass:"line-number"},[t._v("3")]),r("br"),r("span",{staticClass:"line-number"},[t._v("4")]),r("br")])]),r("h5",{attrs:{id:"替换gopath目下的-src-github-com-wendal-go-oci8里四处ociserver为ocisvcctx。"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#替换gopath目下的-src-github-com-wendal-go-oci8里四处ociserver为ocisvcctx。"}},[t._v("#")]),t._v(" 替换GOPATH目下的\\src\\github.com\\wendal\\go-oci8里四处OCIServer为OCISvcCtx。")]),t._v(" "),r("p",[t._v("参考："),r("br"),t._v(" "),r("a",{attrs:{href:"https://www.cnblogs.com/ghj1976/p/3437250.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.cnblogs.com/ghj1976/p/3437250.html"),r("OutboundLink")],1),r("br"),t._v(" "),r("a",{attrs:{href:"https://blog.csdn.net/wq57885/article/details/82841792",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://blog.csdn.net/wq57885/article/details/82841792"),r("OutboundLink")],1)])])}),[],!1,null,null,null);e.default=n.exports}}]);