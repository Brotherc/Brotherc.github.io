(window.webpackJsonp=window.webpackJsonp||[]).push([[79],{2346:function(a,n,e){"use strict";e.r(n);var s=e(2),t=Object(s.a)({},(function(){var a=this,n=a._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[n("h2",{attrs:{id:"客户端启动报错"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#客户端启动报错"}},[a._v("#")]),a._v(" 客户端启动报错")]),a._v(" "),n("p",[a._v("Skywalking服务端部署在192.168.1.100，将skywalking-agent.jar拷贝至客户端所在服务器的"),n("code",[a._v("/user/local/skywalking-agent.jar")]),a._v("，启动java客户端应用")]),a._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[a._v("java")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-jar")]),a._v(" \n-javaagent:/user/local/skywalking-agent.jar \n"),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-DSW_AGENT_COLLECTOR_BACKEND_SERVICES")]),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[a._v("192.168")]),a._v(".1.100:11800 \n"),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-DSW_AGENT_NAME")]),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("client-service \n/user/local/app/client-service.jar\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br")])]),n("p",[n("strong",[a._v("问题：")]),n("br"),a._v("\n启动报错")]),a._v(" "),n("blockquote",[n("p",[a._v("// 省略了前面部分无关日志"),n("br"),a._v("\nCaused by: java.lang.ExceptionInInitializerError: "),n("code",[a._v("agent.service_name")]),a._v(" is missing."),n("br"),a._v("\nat org.apache.skywalking.apm.agent.core.conf.SnifferConfigInitializer.initializeCoreConfig(SnifferConfigInitializer.java:109)"),n("br"),a._v("\nat org.apache.skywalking.apm.agent.SkyWalkingAgent.premain(SkyWalkingAgent.java:68)"),n("br"),a._v("\n... 6 more")])]),a._v(" "),n("p",[n("strong",[a._v("解决：")]),n("br"),a._v("\n把SW_AGENT_COLLECTOR_BACKEND_SERVICES替换为skywalking.collector.backend_service"),n("br"),a._v("\n把SW_AGENT_NAME替换为skywalking.agent.service_name")]),a._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[a._v("java")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-jar")]),a._v(" \n-javaagent:/user/local/skywalking-agent.jar \n"),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-Dskywalking.collector.backend_service")]),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[a._v("192.168")]),a._v(".1.100:11800 \n"),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-Dskywalking.agent.service_name")]),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("client-service \n/user/local/app/client-service.jar\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br")])]),n("br"),a._v(" "),n("h2",{attrs:{id:"_2-客户端agent启动报错"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-客户端agent启动报错"}},[a._v("#")]),a._v(" 2.客户端Agent启动报错")]),a._v(" "),n("p",[a._v("Skywalking服务端部署在192.168.1.100，将skywalking-agent.jar拷贝至客户端所在服务器的"),n("code",[a._v("/user/local/skywalking-agent.jar")]),a._v("，启动java客户端应用")]),a._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[a._v("java")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-jar")]),a._v(" \n-javaagent:/user/local/skywalking-agent.jar \n"),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-Dskywalking.collector.backend_service")]),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[a._v("192.168")]),a._v(".1.100:11800 \n"),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-Dskywalking.agent.service_name")]),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("client-service \n/user/local/app/client-service.jar\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br")])]),n("p",[n("strong",[a._v("问题：")]),n("br"),a._v("\n请求client-service服务的接口，发现Skywalking服务端UI界面并未查询出任何数据，查看client-service服务启动日志显示错误")]),a._v(" "),n("blockquote",[n("p",[a._v("ERROR 2023-04-19 08:51:43.483 main SnifferConfigInitializer : Failed to read the config file, skywalking is going to run in default config."),n("br"),a._v("\norg.apache.skywalking.apm.agent.core.conf.ConfigNotFoundException: Failed to load agent.config."),n("br"),a._v("\nat org.apache.skywalking.apm.agent.core.conf.SnifferConfigInitializer.loadConfig(SnifferConfigInitializer.java:259)"),n("br"),a._v("\nat org.apache.skywalking.apm.agent.core.conf.SnifferConfigInitializer.initializeCoreConfig(SnifferConfigInitializer.java:72)"),n("br"),a._v("\nat org.apache.skywalking.apm.agent.SkyWalkingAgent.premain(SkyWalkingAgent.java:68)"),n("br"),a._v("\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)"),n("br"),a._v("\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)"),n("br"),a._v("\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)"),n("br"),a._v("\nat java.lang.reflect.Method.invoke(Method.java:498)"),n("br"),a._v("\nat sun.instrument.InstrumentationImpl.loadClassAndStartAgent(InstrumentationImpl.java:386)"),n("br"),a._v("\nat sun.instrument.InstrumentationImpl.loadClassAndCallPremain(InstrumentationImpl.java:401)")])]),a._v(" "),n("p",[n("strong",[a._v("解决：")]),n("br"),a._v("\n从官网下载skywalking-agent.zip后进行解压，需要把整个skywalking-agent目录放到服务器上，而不是只拷贝一个skywalking-agent.jar")]),a._v(" "),n("div",{staticClass:"language-text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("|-user\n |-local\n  |-skywalking-agent\n   |-activations\n   |-bootstrap-plugins\n   |-config\n   |-licenses\n   |-logs\n   |-optional-plugins\n   |-optional-reporter-plugins\n   |-plugins\n   |-LICENSE\n   |-NOTICE\n   |-skywalking-agent.jar\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br"),n("span",{staticClass:"line-number"},[a._v("6")]),n("br"),n("span",{staticClass:"line-number"},[a._v("7")]),n("br"),n("span",{staticClass:"line-number"},[a._v("8")]),n("br"),n("span",{staticClass:"line-number"},[a._v("9")]),n("br"),n("span",{staticClass:"line-number"},[a._v("10")]),n("br"),n("span",{staticClass:"line-number"},[a._v("11")]),n("br"),n("span",{staticClass:"line-number"},[a._v("12")]),n("br"),n("span",{staticClass:"line-number"},[a._v("13")]),n("br"),n("span",{staticClass:"line-number"},[a._v("14")]),n("br")])]),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[a._v("java")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-jar")]),a._v(" \n-javaagent:/user/local/skywalking-agent/skywalking-agent.jar \n"),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-Dskywalking.collector.backend_service")]),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[a._v("192.168")]),a._v(".1.100:11800 \n"),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-Dskywalking.agent.service_name")]),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("client-service \n/user/local/app/client-service.jar\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br")])])])}),[],!1,null,null,null);n.default=t.exports}}]);