
<!DOCTYPE html>
<html lang="zh-cn">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Brotherc">
    <title>归档 - Brotherc</title>
    <meta name="author" content="Brotherc">
    
    
    
    <script type="application/ld+json">{}</script>
    <meta property="og:type" content="blog">
<meta property="og:title" content="Brotherc">
<meta property="og:url" content="http://yoursite.com/archives/index.html">
<meta property="og:site_name" content="Brotherc">
<meta property="og:locale" content="zh-cn">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Brotherc">
    
    
        
    
    
        <meta property="og:image" content="http://yoursite.com/assets/images/head.jpg"/>
    
    
    
    
    <!--STYLES-->
    <link rel="stylesheet" href="/assets/css/style-c4ozcsklz4kht2pebhp44xorvyverh23toayhn7i6ubrpyedak24hv1v0hyd.min.css">
    <!--STYLES END-->
    

    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
            
        
    

<header id="header" data-behavior="1">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a class="header-title-link" href="/ ">Brotherc</a>
    </div>
    
        
            <a class="header-right-picture " href="#about">
        
        
            <img class="header-picture" src="/assets/images/head.jpg" alt="作者的图片">
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="1">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a href="/#about">
                    <img class="sidebar-profile-picture" src="/assets/images/head.jpg" alt="作者的图片">
                </a>
                <h4 class="sidebar-profile-name">Brotherc</h4>
                
                    <h5 class="sidebar-profile-bio"><p>java development</p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/ " title="首页">
                    
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">首页</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/all-categories" title="分类">
                    
                        <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">分类</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/all-tags" title="标签">
                    
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">标签</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link open-algolia-search" href="/all-archives" title="归档">
                    
                        <i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">归档</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="#about" title="关于">
                    
                        <i class="sidebar-button-icon fa fa-question" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">关于</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="https://github.com/Brotherc" target="_blank" rel="noopener" title="GitHub">
                    
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="1"
                 class="
                        hasCoverMetaIn
                        ">
                
    <section class="postShorten-group main-content-wrap">
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a class="link-unstyled" href="/2019/02/01/go-oracle/">
                            (无标题)
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2019-02-01T17:13:47+08:00">
	
		    2月 01, 2019
    	
    </time>
    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h1 id="pkg-config-–cflags-oci8-Package-oci8-was-not-found-in-the-pkg-config-search-path"><a href="#pkg-config-–cflags-oci8-Package-oci8-was-not-found-in-the-pkg-config-search-path" class="headerlink" title="pkg-config –cflags oci8, Package oci8 was not found in the pkg-config search path."></a>pkg-config –cflags oci8, Package oci8 was not found in the pkg-config search path.</h1><h6 id="在linux下可以正常运行oracledb-exporter，在windows64下启动时报错"><a href="#在linux下可以正常运行oracledb-exporter，在windows64下启动时报错" class="headerlink" title="在linux下可以正常运行oracledb_exporter，在windows64下启动时报错"></a>在linux下可以正常运行<a href="https://github.com/iamseth/oracledb_exporter" target="_blank" rel="noopener">oracledb_exporter</a>，在windows64下启动时报错</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pkg-config --cflags oci8</span><br><span class="line">Package oci8 was not found in the pkg-config search path.</span><br></pre></td></tr></table></figure>
<h6 id="因为linux中已经安装了oracle客户端，所以怀疑可能是windows下没有导致的。"><a href="#因为linux中已经安装了oracle客户端，所以怀疑可能是windows下没有导致的。" class="headerlink" title="因为linux中已经安装了oracle客户端，所以怀疑可能是windows下没有导致的。"></a>因为linux中已经安装了oracle客户端，所以怀疑可能是windows下没有导致的。</h6><h2 id="1-go-oci8"><a href="#1-go-oci8" class="headerlink" title="1.go-oci8"></a>1.go-oci8</h2><ul>
<li>地址：<a href="https://github.com/wendal/go-oci8" target="_blank" rel="noopener">https://github.com/wendal/go-oci8</a></li>
<li>它是 <a href="https://github.com/mattn/go-oci8" target="_blank" rel="noopener">https://github.com/mattn/go-oci8</a> 的分支，增加了windows下中文的安装说明及相关文件。</li>
<li>从oracledb_exporter的代码中可以看到引用的是go-oci8<br><code>_ &quot;github.com/mattn/go-oci8&quot;</code>,所以需要安装windows的oracle连接。</li>
</ul>
<h2 id="2-安装oci"><a href="#2-安装oci" class="headerlink" title="2.安装oci"></a>2.安装oci</h2><ul>
<li>地址：<a href="https://www.oracle.com/technetwork/database/database-technologies/instant-client/downloads/index.html" target="_blank" rel="noopener">https://www.oracle.com/technetwork/database/database-technologies/instant-client/downloads/index.html</a></li>
<li>我的安装目录为：F:\instantclient_18 _3</li>
</ul>
<h2 id="3-安装oci-sdk"><a href="#3-安装oci-sdk" class="headerlink" title="3.安装oci-sdk"></a>3.安装oci-sdk</h2><ul>
<li>地址：同上。</li>
<li>我的安装目录为F:\instantclient_18 _3\sdk</li>
</ul>
<h2 id="4-安装MinGW"><a href="#4-安装MinGW" class="headerlink" title="4.安装MinGW"></a>4.安装MinGW</h2><ul>
<li>地址：<a href="https://sourceforge.net/projects/mingw-w64/files/" target="_blank" rel="noopener">https://sourceforge.net/projects/mingw-w64/files/</a></li>
<li>我的安装目录为F:\mingw-w64</li>
<li>配置环境变量：在系统变量path中追加 F:\mingw-w64\x86_64-8.1.0-posix-seh-rt_v6-rev0\mingw64\bin</li>
</ul>
<h2 id="5-下载go-oci8驱动"><a href="#5-下载go-oci8驱动" class="headerlink" title="5.下载go-oci8驱动"></a>5.下载go-oci8驱动</h2><ul>
<li>地址：<a href="https://github.com/wendal/go-oci8" target="_blank" rel="noopener">https://github.com/wendal/go-oci8</a></li>
<li>运行命令 go get github.com/wendal/go-oci8 (报错先不管)</li>
<li>复制GOPATH目下的\src\github.com\wendal\go-oci8\windows\pkg-config.exe到到mingw的安装目录mingw64\bin下。</li>
<li>复制GOPATH目下的\src\github.com\wendal\go-oci8\windows\oci8.pc到到mingw的安装目录mingw64\lib\pkg-config的下。</li>
<li>修改oci8.pc<blockquote>
<p>#Package Information for pkg-config<br>prefix=F:/instantclient_18_3<br>exec_prefix=F:/instantclient_18_3<br>libdir=${exec_prefix}<br>includedir=${prefix}/sdk/include/</p>
<p>Name: OCI<br>Description: Oracle database engine<br>Version: 18.3<br>Libs: -L${libdir} -loci<br>Libs.private:<br>Cflags: -I${includedir}</p>
</blockquote>
</li>
</ul>
<h2 id="6-环境变量配置"><a href="#6-环境变量配置" class="headerlink" title="6.环境变量配置"></a>6.环境变量配置</h2><ul>
<li>PATH=原有PATH;F:\instantclient_18_3;</li>
<li>PKG_CONFIG_PATH=F:\mingw-w64\x86_64-8.1.0-posix-seh-rt_v6-rev0\mingw64\lib\pkg-config</li>
</ul>
<h5 id="启动报错"><a href="#启动报错" class="headerlink" title="启动报错"></a>启动报错</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">F:\GOENV\src\github.com\wendal\go-oci8\oci8.go:119: cannot use (**_Ctype_struct_OCIServer)(unsafe.Pointer(&amp;conn.svc)) (type **_Ctype_struct_OCIServer) as type **_Ctype_struct_OCISvcCtx in argument to func literal</span><br><span class="line">F:\GOENV\src\github.com\wendal\go-oci8\oci8.go:136: cannot use (*_Ctype_struct_OCIServer)(c.svc) (type *_Ctype_struct_OCIServer) as type *_Ctype_struct_OCISvcCtx in argument to func literal</span><br><span class="line">F:\GOENV\src\github.com\wendal\go-oci8\oci8.go:263: cannot use (*_Ctype_struct_OCIServer)(s.c.svc) (type *_Ctype_struct_OCIServer) as type *_Ctype_struct_OCISvcCtx in argument to func literal</span><br><span class="line">F:\GOENV\src\github.com\wendal\go-oci8\oci8.go:383: cannot use (*_Ctype_struct_OCIServer)(s.c.svc) (type *_Ctype_struct_OCIServer) as type *_Ctype_struct_OCISvcCtx in argument to func literal</span><br></pre></td></tr></table></figure>
<h5 id="替换GOPATH目下的-src-github-com-wendal-go-oci8里四处OCIServer为OCISvcCtx。"><a href="#替换GOPATH目下的-src-github-com-wendal-go-oci8里四处OCIServer为OCISvcCtx。" class="headerlink" title="替换GOPATH目下的\src\github.com\wendal\go-oci8里四处OCIServer为OCISvcCtx。"></a>替换GOPATH目下的\src\github.com\wendal\go-oci8里四处OCIServer为OCISvcCtx。</h5><p>参考：<br><a href="https://www.cnblogs.com/ghj1976/p/3437250.html" target="_blank" rel="noopener">https://www.cnblogs.com/ghj1976/p/3437250.html</a><br><a href="https://blog.csdn.net/wq57885/article/details/82841792" target="_blank" rel="noopener">https://blog.csdn.net/wq57885/article/details/82841792</a></p>

                    
                        

                    
                    
                        <p>
                            <a href="/2019/02/01/go-oracle/#post-footer" class="postShorten-excerpt_link link">
                                评论和共享
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    <div class="pagination-bar">
    <ul class="pagination">
        
        
        <li class="pagination-number">第 1 页 共 1 页</li>
    </ul>
</div>

</section>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2019 Brotherc. All Rights Reserved.
    </span>
</footer>

            </div>
            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <img id="about-card-picture" src="/assets/images/head.jpg" alt="作者的图片">
        
            <h4 id="about-card-name">Brotherc</h4>
        
            <div id="about-card-bio"><p>java development</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br>
                <p>java</p>

            </div>
        
        
            <div id="about-card-location">
                <i class="fa fa-map-marker-alt"></i>
                <br>
                zhuhai
            </div>
        
    </div>
</div>

        
        
<div id="cover" style="background-image:url('/assets/images/cover.jpg');"></div>
        <!--SCRIPTS-->
<script src="/assets/js/script-dbd16rvloemmuxdzniplmnxxvwoz24eya9wol0b7vvmlokgqsjivmb8dnscy.min.js"></script>
<!--SCRIPTS END-->



    </body>
</html>
